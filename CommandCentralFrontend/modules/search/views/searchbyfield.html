<div ng-show="error" class="alert alert-danger status_message">{{error}}</div>
<div class="content_panel" id="news">
	<div class="row">
		<div class="col-xs-offset-1 col-xs-5">
			<select class="form-control" id="fieldsToSearch" ng-model="fieldsToSearch" ng-options="o for o in searchableFields" multiple>
			</select>
		</div>
		<div class="col-xs-5">
			<select class="form-control" id="fieldsToReturn" ng-model="fieldsToReturn" ng-options="o for o in returnableFields" multiple>
			</select>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-offset-1 col-xs-10">
			<div ng-repeat="field in fieldsToSearch" class="input-group col-xs-offset-3 col-xs-6">
				<span class="input-group-addon" id="searchAddon">{{field}}</span>
				<input type="text" class="form-control" aria-describedby="searchAddon" ng-model="advancedSearchFilters[field]" ng-keyup="searchOnEnter($event, advancedSearchFilters, fieldsToReturn)">
				<br />
			</div>
			<div class="input-group">
				
					<button class="btn btn-default" type="button" ng-click="goToResults(advancedSearchFilters, fieldsToReturn)">Search</button>
				
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12">
			<h3 class="text-center" ng-show="results">Showing {{results.length}} results.</h3>
			<h4 class="text-center" ng-show="results">Click a column to sort by it.</h4>
            <div class="table-responsive">
                <table ng-show="results" class="table-striped col-xs-12">
                    <thead>
                        <tr>
                            <th ng-repeat="field in searchByFieldReturns" ng-click="setOrder(field)"><button ng-class="{'btn-primary': orderKey==field || orderKey=='-'+field}">{{field}}<span class="glyphicon glyphicon-chevron-up" ng-if="orderKey=='-'+field"></span><span class="glyphicon glyphicon-chevron-down" ng-if="orderKey==field"></span></button></th>
                            <th>Profile</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="result in results | orderBy: orderKey" ng-click="goToProfile(result.ID)">
                            <td ng-repeat="field in searchByFieldReturns">{{result[field]}}</td>
                            <td><a href="#/profile/{{result.ID}}"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
		</div>
	</div>
</div>
